<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>企業會員專區 - ACTC 國際資訊安全人才培育與推廣協會</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 統一樣式文件 -->
    <link rel="stylesheet" href="assets/css/common.css" />
    <!-- 統一 Tailwind 配置 -->
    <script src="assets/js/tailwind-config.js"></script>
    <link rel="icon" type="image/png" href="assets/icons/favicon.png">
    <style>
        .fade-in-up {
            animation: fadeInUp 0.6s ease-out forwards;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- 導航欄 -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <!-- Logo -->
                    <div class="w-10 h-10">
                        <img src="assets/images/actc-logo.jpg" alt="ACTC Logo" class="w-full h-full object-contain rounded-full">
                    </div>
                    <span class="text-xl font-bold text-gray-800">ACTC</span>
                </div>
                <div class="hidden md:flex space-x-8">
                    <a href="index.html" class="text-gray-600 hover:text-actc-orange transition-colors">首頁</a>
                    <a href="about.html" class="text-gray-600 hover:text-actc-orange transition-colors">關於協會</a>
                    <a href="index.html#news" class="text-gray-600 hover:text-actc-orange transition-colors">最新消息</a>
                    <a href="index.html#events" class="text-gray-600 hover:text-actc-orange transition-colors">活動課程</a>
                    <a href="corporate-members.html" class="text-actc-orange font-medium">企業會員專區</a>
                    <a href="workgroups.html" class="text-gray-600 hover:text-actc-orange transition-colors">工作小組</a>
                </div>
                <div class="md:hidden">
                    <button id="mobileMenuBtn" class="text-gray-600 hover:text-actc-orange">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
            </div>
            
            <!-- 手機選單 -->
            <div id="mobileMenu" class="hidden md:hidden pb-4">
                <div class="space-y-2">
                    <a href="index.html" class="block text-gray-600 hover:text-actc-orange transition-colors py-2">首頁</a>
                    <a href="about.html" class="block text-gray-600 hover:text-actc-orange transition-colors py-2">關於協會</a>
                    <a href="index.html#news" class="block text-gray-600 hover:text-actc-orange transition-colors py-2">最新消息</a>
                    <a href="index.html#events" class="block text-gray-600 hover:text-actc-orange transition-colors py-2">活動課程</a>
                    <a href="corporate-members.html" class="block text-actc-orange font-medium py-2">企業會員專區</a>
                    <a href="workgroups.html" class="block text-gray-600 hover:text-actc-orange transition-colors py-2">工作小組</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- 頁首橫幅 -->
    <section class="bg-gradient-to-br from-actc-orange to-actc-orange-dark text-white py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-4xl md:text-5xl font-bold mb-6">企業會員專區</h1>
            <p class="text-xl md:text-2xl opacity-90 max-w-3xl mx-auto">
                歡迎加入 ACTC 企業會員，攜手推動資訊安全人才培育與產業發展
            </p>
        </div>
    </section>

    <!-- 企業會員列表 -->
    <section class="py-20 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">我們的企業夥伴</h2>
                <div class="w-24 h-1 bg-actc-orange mx-auto mb-8"></div>
                <p class="text-lg text-gray-600 max-w-3xl mx-auto">
                    感謝以下企業夥伴對資訊安全人才培育的支持與參與，共同建立更安全的數位環境
                </p>
            </div>
            
            <!-- 載入中狀態 -->
            <div id="loading" class="text-center py-12">
                <div class="inline-flex items-center px-4 py-2 font-semibold leading-6 text-actc-orange">
                    <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-actc-orange" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    載入企業會員中...
                </div>
            </div>



            <!-- 空狀態 -->
            <div id="empty" class="hidden text-center py-12">
                <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                </svg>
                <h3 class="mt-2 text-sm font-medium text-gray-900">暫無企業會員</h3>
                <p class="mt-1 text-sm text-gray-500">目前還沒有企業會員加入</p>
            </div>

            <!-- 錯誤狀態 -->
            <div id="error" class="hidden text-center py-12">
                <svg class="mx-auto h-12 w-12 text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z" />
                </svg>
                <h3 class="mt-2 text-sm font-medium text-gray-900">載入失敗</h3>
                <p class="mt-1 text-sm text-gray-500">無法載入企業會員資料，請稍後再試</p>
            </div>

            <!-- 企業會員容器 -->
            <div id="members-container" class="hidden grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- 動態載入的企業會員內容 -->
            </div>
        </div>
    </section>

    <!-- 加入我們區塊 -->
    <section class="py-20 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-8">成為我們的企業夥伴</h2>
            <p class="text-lg text-gray-600 mb-8 max-w-3xl mx-auto">
                如果您的企業願意支持資訊安全人才培育，歡迎加入 ACTC 企業會員，與我們一起為台灣的資安產業發展做出貢獻
            </p>
            <div class="space-y-4 md:space-y-0 md:space-x-4 md:flex md:justify-center">
                <a href="mailto:info@actc.org.tw?subject=企業會員諮詢" class="inline-block bg-actc-orange hover:bg-actc-orange-dark text-white font-bold py-3 px-8 rounded-lg transition-colors">
                    聯絡我們
                </a>
                <a href="about.html" class="inline-block border-2 border-actc-orange text-actc-orange hover:bg-actc-orange hover:text-white font-bold py-3 px-8 rounded-lg transition-colors">
                    了解更多
                </a>
            </div>
        </div>
    </section>

    <!-- 頁尾 -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-3 gap-8">
                <div>
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-10 h-10">
                            <img src="assets/images/actc-logo.jpg" alt="ACTC Logo" class="w-full h-full object-contain rounded-full">
                        </div>
                        <span class="text-xl font-bold">ACTC</span>
                    </div>
                    <p class="text-gray-300 mb-4">國際資訊安全人才培育與推廣協會</p>
                    <p class="text-gray-400 text-sm">致力於推動資訊安全教育，培養專業人才</p>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">聯絡資訊</h3>
                    <div class="space-y-2 text-gray-300">
                        <p>電話：(02) 2345-6789</p>
                        <p>傳真：(02) 2345-6790</p>
                        <p>信箱：info@actc.org.tw</p>
                        <p>地址：105台北市松山區復興北路57號</p>
                    </div>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">快速連結</h3>
                    <div class="space-y-2">
                        <a href="about.html" class="block text-gray-300 hover:text-actc-orange transition-colors">關於協會</a>
                        <a href="index.html#news" class="block text-gray-300 hover:text-actc-orange transition-colors">最新消息</a>
                        <a href="index.html#events" class="block text-gray-300 hover:text-actc-orange transition-colors">活動課程</a>
                        <a href="corporate-members.html" class="block text-gray-300 hover:text-actc-orange transition-colors">企業會員專區</a>
                        <a href="workgroups.html" class="block text-gray-300 hover:text-actc-orange transition-colors">工作小組</a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center">
                <p class="text-gray-400">&copy; 2025 ACTC - 國際資訊安全人才培育與推廣協會. 版權所有.</p>
            </div>
        </div>
    </footer>

    <script>
        // 手機選單切換
        document.getElementById('mobileMenuBtn').addEventListener('click', () => {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('hidden');
        });

        // 企業會員管理
        class MembersManager {
            constructor() {
                this.membersContainer = document.getElementById('members-container');
                this.loadingElement = document.getElementById('loading');
                this.emptyElement = document.getElementById('empty');
                this.errorElement = document.getElementById('error');
                
                // 檢查DOM元素是否存在
                if (!this.membersContainer || !this.loadingElement || !this.emptyElement || !this.errorElement) {
                    console.error('Required DOM elements not found');
                    return;
                }
                
                this.loadMembers();
            }

            async loadMembers() {
                try {
                    this.showLoading();
                    
                    const response = await fetch('/api/corporate-members/displayed');
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    
                    const data = await response.json();
                    
                    if (!data.success) {
                        throw new Error(data.message || 'API request failed');
                    }
                    
                    const members = data.members || [];
                    
                    if (members.length === 0) {
                        this.showEmpty();
                    } else {
                        this.renderMembers(members);
                        this.showMembers();
                    }
                } catch (error) {
                    console.error('Error loading corporate members:', error);
                    this.showError(error.message);
                }
            }

            renderMembers(members) {
                if (!this.membersContainer) {
                    console.error('Cannot render members: container not found');
                    return;
                }
                
                const html = members.map((member, index) => {
                    return this.createMemberCard(member, index);
                }).join('');
                
                this.membersContainer.innerHTML = html;
                
                // 添加淡入動畫
                setTimeout(() => {
                    const cards = this.membersContainer.querySelectorAll('.member-card');
                    cards.forEach((card, index) => {
                        setTimeout(() => {
                            card.classList.add('fade-in-up');
                        }, index * 100);
                    });
                }, 100);
            }

            createMemberCard(member, index) {
                const logoDisplay = member.logo ? 
                    `<img src="${member.logo.startsWith('http') ? member.logo : member.logo}" alt="${member.companyName} Logo" class="w-full h-32 object-contain mb-6" onerror="console.error('Failed to load logo:', this.src); this.parentElement.innerHTML='<div class=&quot;w-full h-32 bg-gradient-to-br from-gray-100 to-gray-200 rounded-lg mb-6 flex items-center justify-center&quot;><svg class=&quot;w-16 h-16 text-gray-400&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot;><path stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; stroke-width=&quot;2&quot; d=&quot;M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4&quot;></path></svg></div>';">` :
                    `<div class="w-full h-32 bg-gradient-to-br from-gray-100 to-gray-200 rounded-lg mb-6 flex items-center justify-center">
                        <svg class="w-16 h-16 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                        </svg>
                    </div>`;

                const websiteLink = member.website ? 
                    `<div class="pt-4 border-t border-gray-100">
                        <a href="${member.website}" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-actc-orange hover:text-actc-orange-dark transition-colors font-medium">
                            <span>訪問網站</span>
                            <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                            </svg>
                        </a>
                    </div>` : '';

                return `
                    <div class="member-card bg-white rounded-lg shadow-md overflow-hidden opacity-0">
                        <div class="p-6">
                            ${logoDisplay}
                            <h3 class="text-xl font-bold text-gray-800 mb-3">${member.companyName || '未命名'}</h3>
                            <p class="text-gray-600 leading-relaxed mb-4">${member.description || '無描述'}</p>
                            ${websiteLink}
                        </div>
                    </div>
                `;
            }

            showLoading() {
                this.loadingElement.classList.remove('hidden');
                this.emptyElement.classList.add('hidden');
                this.errorElement.classList.add('hidden');
                this.membersContainer.classList.add('hidden');
            }

            showEmpty() {
                this.loadingElement.classList.add('hidden');
                this.emptyElement.classList.remove('hidden');
                this.errorElement.classList.add('hidden');
                this.membersContainer.classList.add('hidden');
            }

            showError(message = '載入失敗') {
                this.loadingElement.classList.add('hidden');
                this.emptyElement.classList.add('hidden');
                this.errorElement.classList.remove('hidden');
                this.membersContainer.classList.add('hidden');
                
                // 更新錯誤訊息
                const errorMessageElement = this.errorElement.querySelector('p:last-child');
                if (errorMessageElement) {
                    errorMessageElement.textContent = message;
                }
            }

            showMembers() {
                this.loadingElement.classList.add('hidden');
                this.emptyElement.classList.add('hidden');
                this.errorElement.classList.add('hidden');
                this.membersContainer.classList.remove('hidden');
            }
        }



        // 初始化企業會員管理
        document.addEventListener('DOMContentLoaded', () => {
            try {
                new MembersManager();
            } catch (error) {
                console.error('Failed to initialize MembersManager:', error);
            }
        });
    </script>
</body>
</html>
